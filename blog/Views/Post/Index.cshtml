@model IEnumerable<blog.Models.Post>

@{
    ViewBag.Title = "Index";
}

<section>
    <form action="#" method="post">
        <h3>Search for post</h3>
        <p>
            <label for="fromDate">Between</label>
            <input name="fromDate" id="fromDate" type="date" required />
        </p>
        <p>
            <label for="untilDate">To</label>
            <input name="untilDate" id="untilDate" type="date" required />
        </p>
        <p>
            <label for="authorName">Author</label>
            <input name="authorName" id="authorName" type="text" required />
        </p>
        <p>
            <label for="email">E-mail</label>
            <input name="email" id="email" type="email" required />
        </p>
        <p>
            <label for="minPostComments">Minimum post comments</label>
            <input name="minPostComments" id="minPostComments" min="0" max="10" type="range" />
        </p>
        <p><input type="submit" value="Search post" /></p>
    </form>
</section>

@foreach (var item in Model)
{
    <hr />
<section>
    <article class="blogPost">
        <header>
            <h2>@Html.DisplayFor(modelItem => item.Title)</h2>
            <p>Posted on <time datetime="@item.Date">@Html.DisplayFor(modelItem => item.Date)</time> by <a href="@Html.DisplayFor(modelItem => item.AuthorWebsiteUrl)">@Html.DisplayFor(modelItem => item.Author)</a> - <a href="#comments">@Html.DisplayFor(modelItem => item.Comments.Count) comments</a></p>
        </header>
        <div>
            <p>@Html.DisplayFor(modelItem => item.Content)</p>

            @if (!String.IsNullOrEmpty(item.Image))
            {
                <img src="~/Content/images/@Html.DisplayFor(modelItem => item.Image)" alt="@Html.DisplayFor(modelItem => item.Image)" />
            }

            @if (!String.IsNullOrEmpty(item.Video))
            {
                <video controls="controls">
                    <source src="~/Content/videos/item.Video" type="video/mp4" />
                    Your browser does not support the video tag.
                </video>
            }
        </div>
    </article>
</section>
<section class="comments">
    <h3>Comments</h3>

    @foreach (var comment in item.Comments)
    {
        string authourWebsiteUrl = "#";

        if (!String.IsNullOrEmpty(comment.AuthorWebsiteUrl))
        {
            authourWebsiteUrl = comment.AuthorWebsiteUrl;
        }

        <article>
            <header>
                <a href="@authourWebsiteUrl">@Html.DisplayFor(modelItem => comment.Author)</a> on <time datetime="@comment.Date">@Html.DisplayFor(modelItem => comment.Date)</time>
            </header>
            <p>@Html.DisplayFor(modelItem => comment.Content)</p>
        </article>
    }
</section>
<form action="#" method="post">
    <h3>Post a comment</h3>
    <p>
        <label for="name">Name</label>
        <input name="name" id="name" type="text" required />
    </p>
    <p>
        <label for="email">E-mail</label>
        <input name="email" id="email" type="email" required />
    </p>
    <p>
        <label for="website">Website</label>
        <input name="website" id="website" type="url" />
    </p>
    <p>
        <label for="comment">Comment</label>
        <textarea name="comment" id="comment" required></textarea>
    </p>
    <p><input type="submit" value="Post comment" /></p>
</form>
}
